"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var reach=_interopDefault(require("is-reachable"));const DEFAULT_PING_INTERVAL=12e5,MAX_PING_INTERVAL=15e5,MAX_RETRY=2,defaultConfig={pingInterval:12e5,maxRetry:2,onSuccess:()=>null,onFailure:()=>null},SERVER_TIMEOUT=15e3,RETRY_PING_TIME=2500,getConfig=e=>Object.assign(defaultConfig,e),delay=(e,t)=>{setTimeout(()=>{t()},e)},ping=(e,t)=>{const{maxRetry:n,onFailure:a,onSuccess:i}=getConfig(t);let r=n;reach(e,{timeout:15e3}).then(t=>{t?i():r>0?delay(2500,()=>{ping(e,{maxRetry:r-=1})}):a()})},pingmydyno=(e,t)=>{const n={...getConfig(t)};n.maxRetry>2&&(n.maxRetry=2),n.pingInterval>15e5&&(n.pingInterval=12e5),setInterval(()=>ping(e,n),n.pingInterval)};module.exports=pingmydyno;
